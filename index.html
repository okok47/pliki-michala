<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Pliki Epsteina</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        overflow: hidden;
        animation: kolory 5s infinite alternate;
    }

    @keyframes kolory {
        0%   { background: red; }
        20%  { background: orange; }
        40%  { background: yellow; }
        60%  { background: lime; }
        80%  { background: cyan; }
        100% { background: magenta; }
    }

    video {
        position: absolute;
        width: 300px;
        border-radius: 20px;
        object-fit: cover;
    }

    #playAudioBtn {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 10px 20px;
        font-size: 16px;
        z-index: 1000;
        cursor: pointer;
    }
</style>
</head>

<body>

<button id="playAudioBtn">Odtwórz muzykę</button>
<audio id="muzyka" src="muzyka.mp3" loop></audio>

<video id="film1" src="film1.mp4" autoplay loop muted></video>
<video id="film2" src="film2.mp4" autoplay loop muted></video>
<video id="film3" src="film3.mp4" autoplay loop muted></video>
<video id="film4" src="film4.mp4" autoplay loop muted></video>

<script>
const videos = [
    document.getElementById('film1'),
    document.getElementById('film2'),
    document.getElementById('film3'),
    document.getElementById('film4')
];

const positions = [];

// Poczekaj aż wszystkie filmy się wczytają
let loadedCount = 0;
videos.forEach((v, i) => {
    v.onloadedmetadata = () => {
        loadedCount++;
        const w = v.videoWidth || 300;
        const h = v.videoHeight || 300;
        // ustawienie początkowej losowej pozycji
        positions[i] = {
            top: Math.random() * (window.innerHeight - h),
            left: Math.random() * (window.innerWidth - w),
            width: w,
            height: h,
            dx: (Math.random() - 0.5) * 1, // prędkość pozioma
            dy: (Math.random() - 0.5) * 1  // prędkość pionowa
        };
        v.style.top = positions[i].top + 'px';
        v.style.left = positions[i].left + 'px';
        v.style.width = positions[i].width + 'px';
        v.style.height = positions[i].height + 'px';

        if (loadedCount === videos.length) moveVideos(); // start ruchu po wczytaniu wszystkich
    };
});

function moveVideos() {
    videos.forEach((v, i) => {
        let pos = positions[i];

        pos.top += pos.dy;
        pos.left += pos.dx;

        // Odbicie od krawędzi
        if (pos.top <= 0 || pos.top + pos.height >= window.innerHeight) pos.dy *= -1;
        if (pos.left <= 0 || pos.left + pos.width >= window.innerWidth) pos.dx *= -1;

        v.style.top = pos.top + 'px';
        v.style.left = pos.left + 'px';
    });

    requestAnimationFrame(moveVideos);
}

// przycisk do odtwarzania muzyki
document.getElementById('playAudioBtn').addEventListener('click', () => {
    const audio = document.getElementById('muzyka');
    audio.play().catch(() => {
        alert('Kliknij jeszcze raz, aby odtworzyć muzykę.');
    });
    document.getElementById('playAudioBtn').style.display = 'none';
});
</script>

</body>
</html>
