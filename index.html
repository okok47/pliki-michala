<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Pliki MichaÅ‚a Dihowego</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

/* migajÄ…ce tÅ‚o */
body {
    animation: bg 4s linear infinite;
}

@keyframes bg {
    0% { background: red; }
    25% { background: blue; }
    50% { background: green; }
    75% { background: purple; }
    100% { background: red; }
}

video {
    position: absolute;
    width: 300px; /* WIÄ˜KSZE */
    pointer-events: none;
}
</style>
</head>

<body>

<!-- MUZYKA -->
<audio id="music" src="muzyka.mp3" loop></audio>

<video src="film1.mov" autoplay loop muted playsinline></video>
<video src="film2.mov" autoplay loop muted playsinline></video>
<video src="film3.mov" autoplay loop muted playsinline></video>
<video src="film4.mov" autoplay loop muted playsinline></video>

<script>
const videos = Array.from(document.querySelectorAll("video"));
const size = 300;

const objects = videos.map(video => ({
    video,
    x: Math.random() * (window.innerWidth - size),
    y: Math.random() * (window.innerHeight - size),
    dx: (Math.random() - 0.5) * 1.2, // SZYBCIEJ
    dy: (Math.random() - 0.5) * 1.2
}));

function collide(a, b) {
    return (
        a.x < b.x + size &&
        a.x + size > b.x &&
        a.y < b.y + size &&
        a.y + size > b.y
    );
}

function animate() {
    objects.forEach((obj, i) => {
        obj.x += obj.dx;
        obj.y += obj.dy;

        // odbicie od Å›cian
        if (obj.x <= 0 || obj.x >= window.innerWidth - size) obj.dx *= -1;
        if (obj.y <= 0 || obj.y >= window.innerHeight - size) obj.dy *= -1;

        // kolizje miÄ™dzy filmami
        objects.forEach((other, j) => {
            if (i !== j && collide(obj, other)) {
                obj.dx *= -1;
                obj.dy *= -1;
                other.dx *= -1;
                other.dy *= -1;
            }
        });

        obj.video.style.left = obj.x + "px";
        obj.video.style.top = obj.y + "px";
    });

    requestAnimationFrame(animate);
}

animate();

/* ðŸ”Š MUZYKA â€“ startuje PO PIERWSZYM KLIKNIÄ˜CIU (WYMUSZONE) */
document.addEventListener("click", () => {
    const music = document.getElementById("music");
    music.volume = 1.0;
    music.play().catch(() => {});
}, { once: true });
</script>

</body>
</html>
